# Java
## 싱글쓰레드와 멀티쓰레드

**두 작업 처리하는 경우**
- 하나의 쓰레드로 처리: 한 작업 마친 후 다른 작업 시작
- 두 개의 쓰레드로 작업: 짧은 시간동안 2개의 쓰레드 번갈아 작업 수행

컨텍스트 스위칭에 의해, 오히려 두 개 쓰레드로 작업한 시간이 싱글쓰레드로 작업한 시간보다 더 걸릴 수 있다<br>

- 컨텍스트 스위칭: 프로세스 또는 쓰레드 간 작업 전환
- 스위칭 시간: 쓰레드 < 프로세스

싱글코어에서 단순 CPU만 사용하는 계산작업: 멀티쓰레드보다 싱글쓰레드가 효율적

- 싱글코어인 경우 멀티쓰레드라도 하나의 코어가 번갈아가며 작업 수행하므로 각 작업이 절대 겹치지 않는다
- 멀티 코어에서는 멀티쓰레드로 두 작업을 수행하면, 동시에 두 쓰레드가 수행될 수 있으므로 두 작업이 겹치는 시간대가 발생한다. 그래서 만약 console에 출력하는 작업이 겹칠경우, console 자원에 대해 두 쓰레드가 경쟁하게 된다<br>
-> 두 개의 쓰레드로 작업하는데 싱글쓰레드보다 시간이 더 걸린 이유: 컨텍스트 스위칭 시간 + 자원 이용 대기시간

두 쓰레드가 서로 다른 자원 사용하는 작업: 싱글쓰레드 프로세스보다 멀티 쓰레드 프로세스가 더 효율적

**예) 사용자에게 입력받는 작업(A)과 화면에 숫자 출력하는 작업(B)**
- 하나의 쓰레드로 처리: 해당 쓰레드는 A 작업중 사용자가 입력 마칠 때까지 아무 일도 못하고 대기
- 두 개의 쓰레드로 처리: thread1에서 A작업중 사용자 입력 기다리는 동안, thread2에서 B작업 진행이 가능하기 때문에 효율적인 CPU 사용 가능<br>
1.A 작업중 입력 기다리며 블로킹 상태: 스케줄러는 이 상태의 쓰레드를 실행하지 않고, 다른 실행가능한 쓰레드에 CPU를 할당<br>
2.입력 완료시 A는 대기상태로 변하고, 스케줄러는 이 쓰레드에 CPU시간을 할당해 입력을 처리


+병행: 여러 쓰레드가 여러 작업을 동시에 진행<br>
+병렬: 하나의 작업을 여러 쓰레드가 나눠 처리

## 쓰레드의 우선순위
쓰레드는 우선순위 속성(멤버변수)를 가지고 있으며, 이 값에 따라 쓰레드의 실행시간이 달라진다

- 가능한 우선순위 범위: 1~10
- 숫자가 클수록 우선순위가 높다. (1:최소~ 10:최대)
- 쓰레드 우선순위는 쓰레드를 생성한 쓰레드로부터 상속받는다
- main메서드를 수행하는 쓰레드는 우선순위가 5
- `void setPriority(int newPriority)` : 쓰레드의 우선순위 변경. 쓰레드를 실행하기 전에만 변경 가능하다
- `int getPriority()`: 쓰레드 우선순위 반환

멀티코어에서는 쓰레드 우선순위에 따른 실행에 차이가 없다. 따라서 우선순위에 차등을 두어 쓰레드를 실행하려면, 작업에 우선순위를 두어 PriorityQueue에 저장해두고 우선순위가 높은 작업이 먼저 처리되도록 하는게 낫다

## 쓰레드 그룹
서로 관련된 쓰레드를 그룹으로 다루기 위한 것

- 쓰레드 그룹에 다른 쓰레드 그룹을 포함 가능
- 보안상 도입된 개념
- 자신이 속한 쓰레드 그룹이나 하위 쓰레드 그룹은 변경 가능. 다른 쓰레드 그룹의 쓰레드는 변경 불가능

생성자: `ThreadGroup(String name)`, `ThreadGroup(ThreadGroup parent, String name)`

쓰레드를 쓰레드 그룹에 포함시키기: Thread 생성자 이용 <br>
`Thread(ThreadGroup group, String name)`<br>
`Thread(ThreadGroup group, Runnable target)`<br>
`Thread(ThreadGroup group, Runnable target, String name)`<br>

- 모든 쓰레드는 반드시 쓰레드 그룹에 포함되어야 한다. 
- 쓰레드 그룹을 지정하지 않은 쓰레드는 자신을 생성한 쓰레드와 같은 쓰레드 그룹에 속하게 된다
- 자바 어플리케이션 실행 -> JVM은 main과 system 쓰레드 그룹 생성 -> JVM 운영에 필요한 쓰레드들 생성해 쓰레드 그룹에 포함시킴 <br>
예) main 메서드 수행하는 main 쓰레드는 main 쓰레드 그룹에 속함
- 우리가 생성하는 모든 쓰레드 그룹은 main 쓰레드 그룹의 하위 쓰레드 그룹이 된다
- 쓰레드 그룹을 지정하지 않고 생성한 쓰레드는 main쓰레드 그룹에 속함

`setMaxPriority()`: 쓰레드 그룹의 최대 우선순위 설정<br>
-> 쓰레드가 쓰레드 그룹에 추가되기 전에 호출해야 한다